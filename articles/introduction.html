<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="MARS">
<title>Introduction • MARS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction">
<meta property="og:description" content="MARS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MARS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-topics">Topics</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-topics">
    <a class="dropdown-item" href="../articles/introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/equations.html">Model equations</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Blue-Matter/MARS/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction</h1>
            
            <h4 data-toc-skip class="date">2024-05-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Blue-Matter/MARS/blob/HEAD/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="d-none name"><code>introduction.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>Traditional stock assessment have fitted population models on the
assumption that the fishery and survey data represent the dynamics of a
single unit population (typically represented as a “stock”). For some
mixed-stock fisheries which display complex spatial, seasonal dynamics,
these assumptions may be difficult to meet in order to estimate biomass
and abundance for individual stocks. For example, the composition of
fishery catches may be naively split among constituent stocks, or the
trends in fishery catch per unit effort may be assumed to be equally
representative for all stocks.</p>
<p>These assumptions may not produce a defensible assessment. If
population mixing is quite variable across seasons and years, then the
error from data processing can propagate significant error into the
estimation framework.</p>
<p>MARS (<em>Multi-stock Assessment with Regional Spatiotemporal
dynamics</em>) is an age-structured model is intended to address these
situations where an explicit multi-stock, seasonal, and spatial
assessment model is desirable.</p>
<p>Some of the distinguishing features of MARS include:</p>
<ul>
<li>Explicit modeling of seasonal and spatial dynamics, with flexible
parameterizations for stock movement and distribution</li>
<li>Multi-stock modeling with fishery catches are not identified to the
stock or species level. Instead, there is a separate likelihood for
stock composition data to facilitate data weighting and profiling among
other data types</li>
<li>Fitting to close-kin genetic data to estimate individual stock size,
especially if the populations are frequently well mixed in the fishery
data</li>
</ul>
<p>As a “next-generation” stock assessment package, MARS relies on
state-of-the-art developments in computational power, optimization
software, and along with important lessons learned from modeling
mixed-stock marine fisheries, such as Atlantic bluefin tuna.</p>
<p>MARS is entirely written in R and uses automatic differentiation
enabled by RTMB for model fitting.</p>
</div>
<div class="section level2">
<h2 id="package-overview">Package overview<a class="anchor" aria-label="anchor" href="#package-overview"></a>
</h2>
<div class="section level3">
<h3 id="model-fitting">Model fitting<a class="anchor" aria-label="anchor" href="#model-fitting"></a>
</h3>
<p>Model fitting first starts with a S4 object of class
<code>MARSdata</code>, with various slots to specify the model structure
and data. See <code><a href="../reference/MARSdata-class.html">help("MARSdata-class")</a></code>.
<code><a href="../reference/check_data.html">check_data()</a></code> scans the object and checks if the arrays are
of the correct dimension and the necessary ancillary information are
provided, e.g., sample sizes for compositional data.</p>
<p>Once the data object is set up, we can create the parameter object
for RTMB with <code><a href="../reference/make_parameters.html">make_parameters()</a></code>. A list of starting values
can be provided to override system defaults. This function also calls
<code><a href="../reference/make_parameters.html">make_map()</a></code> which will create a list that specifies which
parameters are fixed and mirrored. A list of mapped parameters can be
provided to override system defaults, with additional arguments as a
shortcut.</p>
<p>The parameter and map set-up is finally checked with
<code><a href="../reference/make_parameters.html">check_parameters()</a></code> which reports the structure of the model
to the console including start values and the parameters to be
estimated.</p>
<p>These objects can then be passed to <code><a href="../reference/fit_MARS.html">fit_MARS()</a></code> which
creates and fits the model:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MARSdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_data.html">check_data</a></span><span class="op">(</span><span class="va">MARSdata</span><span class="op">)</span></span>
<span><span class="va">tmb_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_parameters.html">make_parameters</a></span><span class="op">(</span><span class="va">MARSdata</span><span class="op">)</span></span>
<span></span>
<span><span class="va">parameters</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_parameters.html">check_parameters</a></span><span class="op">(</span><span class="va">tmb_list</span><span class="op">$</span><span class="va">p</span>, <span class="va">tmb_list</span><span class="op">$</span><span class="va">map</span>, MARSdata <span class="op">=</span> <span class="va">MARSdata</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fit_MARS.html">fit_MARS</a></span><span class="op">(</span><span class="va">MARSdata</span>, <span class="va">parameters</span>, map <span class="op">=</span> <span class="va">tmb_list</span><span class="op">$</span><span class="va">map</span>, random <span class="op">=</span> <span class="va">tmb_list</span><span class="op">$</span><span class="va">random</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="reporting">Reporting<a class="anchor" aria-label="anchor" href="#reporting"></a>
</h3>
<p>Markdown reports generate a figures and tables for model estimates,
ascertain goodness of fit, residuals, etc.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/report.html">report</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/intro-index-1.png"><!-- --></p>
<p><em>Example figure that compares the fit in the observed and
predicted index.</em></p>
<p>The reporting function uses a variety of <code>plot_*()</code>
functions that can be accessed by the user. View the options with
<code><a href="../reference/plot-MARS-data.html">help("plot-MARS-data")</a></code> and
<code><a href="../reference/plot-MARS-state.html">help("plot-MARS-state")</a></code>.</p>
</div>
<div class="section level3">
<h3 id="diagnostics">Diagnostics<a class="anchor" aria-label="anchor" href="#diagnostics"></a>
</h3>
<p>Various built-in functions run diagnostic procedures to evaluate
model performance.</p>
<p>The <code><a href="../reference/profile.html">profile()</a></code> generic can profile up to two parameters
simultaneously. The change in the likelihood and objective function can
indicate how well the parameter is informed by the various data. A
two-parameter profile can identify potentially strong correlations
between parameters.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prof_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/profile.html">profile</a></span><span class="op">(</span><span class="va">fit</span>, <span class="st">"R0_s[1]"</span>, v1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">750</span>, <span class="fl">850</span>, <span class="fl">25</span><span class="op">)</span>, <span class="st">"h_s[1]"</span>, v2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.75</span>, <span class="fl">0.95</span>, <span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">prof_df</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/intro-prof-1.png"><!-- --></p>
<p><em>Contour plot of the change in the objective function to unfished
recruitment (x-axis) and steepness (y-axis) in stock 1.</em></p>
<p>The <code><a href="../reference/retrospective.html">retrospective()</a></code> evaluates the consistency of model
estimates as the data time series are truncated, starting with the most
recent years. This diagnostic can inform model behavior in future
assessments.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ret</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/retrospective.html">retrospective</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/report.html">report</a></span><span class="op">(</span><span class="va">ret</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ret</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/intro-ret-1.png"><!-- --></p>
<p><em>Retrospective figure for recruitment estimates. The summary()
generic reports Mohn’s rho.</em></p>
<p>The <code><a href="../reference/simulate.html">simulate()</a></code> generic generates new observations by
sampling from the probability density functions represented in the
likelihood. Re-fit to these simulated values to ensure that the
estimated parameters are retrievable.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Quang Huynh.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
